appname: kai-blog
build:
  base: registry.yxapp.xyz/centos-golang:go1.6.2
  prepare:
    version: 1
    script:
      - echo "prepare"
      - go get golang.org/x/tools/blog
      - go get golang.org/x/tools/godoc/static
      - go get golang.org/x/tools/playground
  script:
    - cd blog && go build
release:
  dest_base: registry.yxapp.xyz/centos:1.0.1
  copy:
    - src: /lain/app/blog/blog
      dest: /lain/app/blog/blog
    - src: /lain/app/content
      dest: /lain/app/content
    - src: /lain/app/static
      dest: /lain/app/static
    - src: /lain/app/template
      dest: /lain/app/template
web:
  num_instances: 1
  cmd: /lain/app/blog/blog
  port: 8080
  logs:
    - monitor.log
